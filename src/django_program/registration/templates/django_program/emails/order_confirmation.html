<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!--
    Subject: Your order {{ order.reference }} for {{ conference.name }}
  -->
</head>
<body style="margin: 0; padding: 0; background-color: #f8f9fa; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; color: #1a1a2e; line-height: 1.6;">
  <table role="presentation" width="100%" cellpadding="0" cellspacing="0" style="background-color: #f8f9fa; padding: 2rem 0;">
    <tr>
      <td align="center">
        <table role="presentation" width="600" cellpadding="0" cellspacing="0" style="background-color: #ffffff; border-radius: 10px; border: 1px solid #e2e4e9; overflow: hidden; max-width: 100%;">
          <!-- Header -->
          <tr>
            <td style="background-color: #4338ca; padding: 1.5rem 2rem;">
              <h1 style="margin: 0; font-size: 1.25rem; font-weight: 700; color: #ffffff;">
                {{ conference.name }}
              </h1>
            </td>
          </tr>

          <!-- Body -->
          <tr>
            <td style="padding: 2rem;">
              <h2 style="margin: 0 0 0.5rem; font-size: 1.35rem; font-weight: 800; color: #1a1a2e;">
                Thank you for your order!
              </h2>
              <p style="margin: 0 0 1.5rem; font-size: 0.95rem; color: #555770;">
                We've received your registration. Here are your order details.
              </p>

              <!-- Order Reference -->
              <table role="presentation" width="100%" cellpadding="0" cellspacing="0" style="margin-bottom: 1.5rem;">
                <tr>
                  <td style="background-color: #e8e6f8; border-radius: 6px; padding: 1rem 1.25rem; text-align: center;">
                    <span style="font-size: 0.78rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.06em; color: #8889a0; display: block; margin-bottom: 0.15rem;">Order Reference</span>
                    <span style="font-size: 1.5rem; font-weight: 800; color: #4338ca; font-family: 'SF Mono', SFMono-Regular, Menlo, Consolas, monospace;">
                      {{ order.reference }}
                    </span>
                  </td>
                </tr>
              </table>

              <!-- Line Items -->
              <table role="presentation" width="100%" cellpadding="0" cellspacing="0" style="margin-bottom: 1.5rem; border: 1px solid #e2e4e9; border-radius: 6px; overflow: hidden;">
                <tr style="background-color: #f8f9fa;">
                  <td style="padding: 0.6rem 1rem; font-size: 0.72rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.06em; color: #8889a0; border-bottom: 1px solid #e2e4e9;">Item</td>
                  <td style="padding: 0.6rem 1rem; font-size: 0.72rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.06em; color: #8889a0; border-bottom: 1px solid #e2e4e9; text-align: center;">Qty</td>
                  <td style="padding: 0.6rem 1rem; font-size: 0.72rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.06em; color: #8889a0; border-bottom: 1px solid #e2e4e9; text-align: right;">Amount</td>
                </tr>
                {% for item in order.line_items.all %}
                <tr>
                  <td style="padding: 0.6rem 1rem; font-size: 0.9rem; color: #1a1a2e; border-bottom: 1px solid #f0f1f4;">{{ item.description }}</td>
                  <td style="padding: 0.6rem 1rem; font-size: 0.9rem; color: #555770; border-bottom: 1px solid #f0f1f4; text-align: center;">{{ item.quantity }}</td>
                  <td style="padding: 0.6rem 1rem; font-size: 0.9rem; color: #1a1a2e; border-bottom: 1px solid #f0f1f4; text-align: right;">${{ item.line_total }}</td>
                </tr>
                {% endfor %}
              </table>

              <!-- Total -->
              <table role="presentation" width="100%" cellpadding="0" cellspacing="0" style="margin-bottom: 1.5rem;">
                {% if order.discount_amount %}
                <tr>
                  <td style="padding: 0.35rem 0; font-size: 0.9rem; color: #555770;">Subtotal</td>
                  <td style="padding: 0.35rem 0; font-size: 0.9rem; color: #1a1a2e; text-align: right;">${{ order.subtotal }}</td>
                </tr>
                <tr>
                  <td style="padding: 0.35rem 0; font-size: 0.9rem; color: #059669;">Discount</td>
                  <td style="padding: 0.35rem 0; font-size: 0.9rem; color: #059669; text-align: right;">-${{ order.discount_amount }}</td>
                </tr>
                {% endif %}
                <tr>
                  <td style="padding: 0.5rem 0 0; font-size: 1.05rem; font-weight: 700; color: #1a1a2e; border-top: 2px solid #e2e4e9;">Total</td>
                  <td style="padding: 0.5rem 0 0; font-size: 1.05rem; font-weight: 700; color: #1a1a2e; border-top: 2px solid #e2e4e9; text-align: right;">${{ order.total }}</td>
                </tr>
              </table>

              <!-- Billing Info -->
              {% if order.billing_name or order.billing_email %}
              <table role="presentation" width="100%" cellpadding="0" cellspacing="0" style="background-color: #f8f9fa; border-radius: 6px; padding: 1rem 1.25rem;">
                <tr>
                  <td style="padding: 1rem 1.25rem;">
                    <span style="font-size: 0.72rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.06em; color: #8889a0; display: block; margin-bottom: 0.5rem;">Billed To</span>
                    {% if order.billing_name %}<span style="font-size: 0.9rem; color: #1a1a2e; display: block;">{{ order.billing_name }}</span>{% endif %}
                    {% if order.billing_email %}<span style="font-size: 0.9rem; color: #555770; display: block;">{{ order.billing_email }}</span>{% endif %}
                    {% if order.billing_company %}<span style="font-size: 0.9rem; color: #555770; display: block;">{{ order.billing_company }}</span>{% endif %}
                  </td>
                </tr>
              </table>
              {% endif %}
            </td>
          </tr>

          <!-- Footer -->
          <tr>
            <td style="padding: 1.25rem 2rem; border-top: 1px solid #e2e4e9; text-align: center; font-size: 0.8rem; color: #8889a0;">
              {{ conference.name }}
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
</body>
</html>
